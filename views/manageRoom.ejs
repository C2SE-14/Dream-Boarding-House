<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/manageRoom.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
  <body>
    <%- include('./components/header')%>
    <div class="container">
        <%if(listRoom.length > 0) {%>
            <!-- <div class="list-room"> -->
                <%for(let i=0; i < listRoom.length; i++) {%>
                    <div class="room-item">
                        <div class="avt">
                            <img src="<%=listRoom[i].images[0].url%>" alt="">
                        </div>
                        <div class="infor">
                            <p class="username">
                                <label for="">
                                    Kiểu phòng: 
                                </label>
                                <%=listRoom[i].type%>
                            </p>
                            <p class="email">
                                <label for="">
                                    Diện tích: 
                                </label>
                                <%=listRoom[i].acreage%> m2
                            </p>
                            <p class="email">
                                <label for="">
                                    Địa chỉ: 
                                </label>
                                <%=listRoom[i].address%>
                            </p>
                            <p class="description">
                                <label for="">
                                    Mô tả: 
                                </label>
                                <%=listRoom[i].description%>
                            </p>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-outline-info">Xóa bài</button>
                            <button type="button" class="btn btn-outline-info">Sửa bài</button>
                        </div>
                    </div>
                <%}%>
                <div class="row">
                    <!-- hiển thị phân trang nếu có trang -->
                    <% if(pages > 0) { %>
                    <nav class="mx-auto">
                      <ul class="pagination" style="margin-top: 2rem;">
                      
                        <!-- FIRST ITEM -->  
                        <% if(current == 1) { %> 
                            <li class="page-item disabled">
                              <a class="page-link" href="/">Trang đầu</a>
                            </li>
                        <% } else { %>
                            <li class="page-item">
                              <a class="page-link" href="/">Trang đầu</a>
                            </li>
                        <% } %>
                        
                        <!-- ITEMS  -->
                        <% var i = (Number(current) > 3 ? Number(current) - 2 : 1) %> 
                        <% if(i !== 1) { %>
                            <li class="page-item disabled">
                              <a class="page-link" href="#">...</a>
                            </li>
                        <% } %>
                        <% for(; i <= (Number(current) + 2) && i <= pages; i++) { %>
                          <% if(i == current) { %>
                            <li class="page-item active">
                              <a class="page-link" href="/innkeeper/myRoom/all/<%= i %>">
                                <%= i %>
                              </a>
                            </li>
                        <% } else { %>
                            <li class="page-item">
                              <a class="page-link" href="/innkeeper/myRoom/all/<%= i %>">
                                <%= i %>
                              </a>
                            </li>
                        <% } %>
                        <% if (i == Number(current) + 2 && i < pages) { %>
                            <li class="page-item disabled">
                              <a class="page-link" href="#">...</a>
                            </li>
                        <% } %>
                        <% } %>
                        
                        <!-- LAST ITEM -->
                        <% if(current == pages) { %> 
                            <li class="page-item disabled">
                              <a class="page-link" href="#">
                                Last
                              </a>
                            </li>
                        <% } else { %>
                            <li class="page-item">
                              <a class="page-link" href="/innkeeper/myRoom/all/<%= pages %>">
                                Last
                              </a>
                            </li>
                        <% } %>
                      </ul>
                    </nav>
                    <% } %>
                  </div>
                </div>
                
            <!-- </div> -->
        <% } else {%>
            <p>Bạn chưa đăng bài viết nào</p>
        <%}%>
    </div>
    <!-- <%- include('./components/footer')%> -->
  </body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script>
      const btnFollow = document.getElementById('btn-follow');
      btnFollow.addEventListener("click", () => {
        const id = btnFollow.getAttribute("data-id");
        console.log('id: ', id);
        $.ajax({
            url: `http://localhost:5000/user/people/follow/${id}`,
            type: "POST",
            success: function (response) {
                if(response.msg === "Follow successfully") {
                msg = response.msg;
                btnFollow.textContent = '✔'
                }
            }
            });
      })
  </script>
  </html>
